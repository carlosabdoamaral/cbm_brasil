syntax = "proto3";
package proto;
option go_package = "./proto";

import "common.proto";
import "account.proto";

service OccurrenceService {
    rpc GetAll(Empty) returns (OccurrenceDetailsList) {};
    rpc GetById(Id) returns (OccurrenceDetails) {};
    rpc GetNearby(Location) returns (OccurrenceDetailsList) {};
    rpc Create(NewOccurrence) returns (StatusResponse) {};
    rpc Update(OccurrenceDetails) returns (StatusResponse) {};
    rpc SoftDelete(Id) returns (StatusResponse) {};
}

message OccurrenceDetailsList {
    repeated OccurrenceDetails occurrences = 1;
}

message NewOccurrence {
    string author = 2;
    string title = 3;
    string description = 4;
    string image_base64 = 5;
    Location location = 6;
    repeated OccurrenceTag tags = 7;
}

// AJUSTAR!
message OccurrenceDetails {
    int64 id = 1;
    AccountPublicInfos author = 2;
    string title = 3;
    string description = 4;
    string image_base64 = 5;
    Location location = 6;
    repeated OccurrenceTag tags = 7;
}

message OccurrenceTag {
    int64 id = 1;
    string title = 2;
}
